

$ docker-machine create -d amazonec2 --amazonec2-region us-west-2 --amazonec2-instance-type "t2.micro" --amazonec2-ssh-keypath ~/.ssh/id_rsa aws-new-cli-Name1

# AWS Notes

## Connecting to ec2 instance


#### (Windows) working dir contains RSA_key.pem 
#### >ssh -i RSA_key.pem ec2-user@ec2-instance.us-west-2.compute.amazonaws.com

### Updating and installing 

#### $sudo yum update -y
#### $sudo yum install -y golang
#### $sudo yum install -y docker
#### $sudo yum install httpd -y
#### $sudo yum install ca-certificates



### Conf

#### $sudo systemctl start httpd
#### $sudo systemctl enable httpd
#### $sudo usermod -a -G apache ec2-user
#### $sudo update-ca-trust force-enable
#### $sudo update-ca-trust
#### $sudo vim /etc/cloud/cloud.cfg
#### Add 'preserve_hostname: true' to file or set to true if already exists. (I put it under 'users:' inside the file)
#### $sudo hostnamectl set-hostname webserver.mydomain.com


### Docker 

#### $sudo systemctl start docker
#### $sudo docker build -t my-golang-app .
#### $sudo docker run -d -p 'AWSport:applicationport' -it --rm --name MywebsiteName my-golang-app

### Enable TLS on server

#### $sudo systemctl is-enabled httpd
#### $sudo systemctl start httpd && sudo systemctl enable httpd
#### $sudo yum update -y
#### $sudo yum install -y mod_ssl
#### $cd /etc/pki/tls/certs
#### $sudo ./make-dummy-cert localhost.crt
#### https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/SSL-on-amazon-linux-2.html 

### Extra BS 

#### https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Tutorials.WebServerDB.CreateWebServer.html
#### https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/set-hostname.html
